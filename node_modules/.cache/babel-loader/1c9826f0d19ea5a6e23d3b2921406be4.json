{"remainingRequest":"/Users/lishumin/Desktop/demo/sql-editor/node_modules/babel-loader/lib/index.js!/Users/lishumin/Desktop/demo/sql-editor/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lishumin/Desktop/demo/sql-editor/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lishumin/Desktop/demo/sql-editor/src/sqlEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lishumin/Desktop/demo/sql-editor/src/sqlEditor.vue","mtime":1592982765478},{"path":"/Users/lishumin/Desktop/demo/sql-editor/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lishumin/Desktop/demo/sql-editor/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lishumin/Desktop/demo/sql-editor/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lishumin/Desktop/demo/sql-editor/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY29kZW1pcnJvciwgQ29kZU1pcnJvciB9IGZyb20gInZ1ZS1jb2RlbWlycm9yIjsKaW1wb3J0IHNxbEZvcm1hdHRlciBmcm9tICJzcWwtZm9ybWF0dGVyIjsKXyA9IHJlcXVpcmUoJ2xvZGFzaCcpOwppbXBvcnQgImNvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuY3NzIjsgLy8g6K+t6KiA6K+t5rOVCgppbXBvcnQgImNvZGVtaXJyb3IvbW9kZS9zcWwvc3FsIjsgLy8gc3Fs6K+t6KiA5o+Q56S6CgppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vaGludC9zcWwtaGludC5qcyI7IC8vIGFjdGl2ZS1saW5lLmpzCgppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vc2VsZWN0aW9uL2FjdGl2ZS1saW5lLmpzIjsgLy8gc3R5bGVTZWxlY3RlZFRleHQKCmltcG9ydCAiY29kZW1pcnJvci9hZGRvbi9zZWxlY3Rpb24vbWFyay1zZWxlY3Rpb24uanMiOwppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vc2VhcmNoL3NlYXJjaGN1cnNvci5qcyI7IC8vIOiHquWKqOaPkOekugoKaW1wb3J0ICJjb2RlbWlycm9yL2FkZG9uL2hpbnQvc2hvdy1oaW50LmpzIjsKaW1wb3J0ICJjb2RlbWlycm9yL2FkZG9uL2hpbnQvc2hvdy1oaW50LmNzcyI7IC8vIGhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXMKCmltcG9ydCAiY29kZW1pcnJvci9hZGRvbi9zY3JvbGwvYW5ub3RhdGVzY3JvbGxiYXIuanMiOwppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vc2VhcmNoL21hdGNoZXNvbnNjcm9sbGJhci5qcyI7CmltcG9ydCAiY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvc2VhcmNoY3Vyc29yLmpzIjsKaW1wb3J0ICJjb2RlbWlycm9yL2FkZG9uL3NlYXJjaC9tYXRjaC1oaWdobGlnaHRlci5qcyI7IC8vIGtleU1hcAoKaW1wb3J0ICJjb2RlbWlycm9yL21vZGUvY2xpa2UvY2xpa2UuanMiOwppbXBvcnQgImNvZGVtaXJyb3Iva2V5bWFwL3N1YmxpbWUuanMiOyAvLyBmb2xkR3V0dGVyCgppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkZ3V0dGVyLmNzcyI7CmltcG9ydCAiY29kZW1pcnJvci9hZGRvbi9mb2xkL2JyYWNlLWZvbGQuanMiOwppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vZm9sZC9jb21tZW50LWZvbGQuanMiOwppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkY29kZS5qcyI7CmltcG9ydCAiY29kZW1pcnJvci9hZGRvbi9mb2xkL2ZvbGRndXR0ZXIuanMiOwppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vZm9sZC9pbmRlbnQtZm9sZC5qcyI7CmltcG9ydCAiY29kZW1pcnJvci9hZGRvbi9mb2xkL21hcmtkb3duLWZvbGQuanMiOwppbXBvcnQgImNvZGVtaXJyb3IvYWRkb24vZm9sZC94bWwtZm9sZC5qcyI7IC8vIHRoZW1lIGNzcwoKaW1wb3J0ICJjb2RlbWlycm9yL3RoZW1lL3hxLWRhcmsuY3NzIjsKaW1wb3J0ICJjb2RlbWlycm9yL3RoZW1lL3hxLWxpZ2h0LmNzcyI7CmltcG9ydCB7IEtFWVdPUkRTLCBGVU5DVElPTlMgfSBmcm9tICIuL2VkaXRvci1ib3giOyAvLyDljLnphY0g77yIZnJvbSB8fCBqb2lu77yJ5YWz6ZSu5a2XCgpjb25zdCBUQUJMRV9TVUdHRVNFVF9QT1NfUkVHID0gLyhefFxzKykoZnJvbXxqb2luKVxzKyhcUyopJC9pOyAvLyDljLnphY3ooajlkI0g5Yir5ZCNCgpjb25zdCBUQUJMRVNfUEFUVEVOUyA9IFsvXHNqb2luXHMrKFtcdy5fYF0rKVxzKig/OmFzKT9ccyooW1x3X2BdKyk/L2dpLCAvXHNmcm9tXHMrKFtcdy5fYF0rKVxzKig/OmFzKT9ccyooW1x3X2BdKyk/L2dpXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJzcWxFZGl0b3IiLAogIGNvbXBvbmVudHM6IHsKICAgIGNvZGVtaXJyb3IKICB9LAogIHByb3BzOiB7fSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNxbENvZGU6ICdzZWxlY3RcbicgKyAnICBkaXN0aW5jdCB1c2VyaWRcbicgKyAnZnJvbVxuJyArICcgIHR1dG9yLnNfdHV0b3Jfb3JkZXJfdHBcbicgKyAnd2hlcmVcbicgKyAnICBkYXRlZGlmZihcJzIwMTYtMDgtMDhcJywgcGFpZGR0KSA+PSAxXG4nICsgJyAgYW5kIGRhdGVkaWZmKFwnMjAxNi0wOC0wOFwnLCBwYWlkZHQpIDw9IO+8nyDvvJ8gLS3ov4fljrvvvJ/lpKknLAogICAgICBlZGl0b3JPcHRpb25zOiB7CiAgICAgICAgLy8gY29kZW1pcnJvciBvcHRpb25zCiAgICAgICAgdGFiU2l6ZTogNCwKICAgICAgICBtb2RlOiAidGV4dC94LW15c3FsIiwKICAgICAgICB0aGVtZTogInhxLWxpZ2h0IiwKICAgICAgICBmdWxsU2NyZWVuOiBmYWxzZSwKICAgICAgICBsaW5lTnVtYmVyczogdHJ1ZSwKICAgICAgICBsaW5lOiB0cnVlLAogICAgICAgIC8vIOS7o+eggeaKmOWPoAogICAgICAgIGZvbGRHdXR0ZXI6IHRydWUsCiAgICAgICAgZ3V0dGVyczogWyJDb2RlTWlycm9yLWxpbmVudW1iZXJzIiwgIkNvZGVNaXJyb3ItZm9sZGd1dHRlciJdLAogICAgICAgIC8vIOmrmOe6p+mFjee9ru+8iOmcgOimgeW8leWFpeWvueW6lOeahOaPkuS7tuWMhe+8iSxjb2RlbWlycm9yIGFkdmFuY2VkIG9wdGlvbnMoWW91IG5lZWQgdG8gbWFudWFsbHkgaW50cm9kdWNlIHRoZSBjb3JyZXNwb25kaW5nIGNvZGVtaXJyb3IgZnVuY3Rpb24gc2NyaXB0IGNvZGUpCiAgICAgICAgLy8gc3VibGltZeOAgWVtYWNz44CBdmlt5LiJ56eN6ZSu5L2N5qih5byP77yM5pSv5oyB5L2g55qE5LiN5ZCM5pON5L2c5Lmg5oOvCiAgICAgICAga2V5TWFwOiAic3VibGltZSIsCiAgICAgICAgLy8g5oyJ6ZSu5pig5bCE77yM5q+U5aaCQ3RybOmUruaYoOWwhGF1dG9jb21wbGV0Ze+8jGF1dG9jb21wbGV0ZeaYr2hpbnTku6PnoIHmj5DnpLrkuovku7YKICAgICAgICBleHRyYUtleXM6IHsKICAgICAgICAgIEY5OiAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9ybWF0U3FsRnVuKCk7CiAgICAgICAgICB9LAogICAgICAgICAgIkN0cmwtc3BhY2UiOiAiYXV0b2NvbXBsZXRlIgogICAgICAgIH0sCiAgICAgICAgc2hvd0hpdE9iajogbnVsbCwKICAgICAgICAvLyDlu7bov5/mmL7npLrogZTmg7PliJfooagKICAgICAgICBjdXJyZW50V29yZDogIiIsCiAgICAgICAgLy8g5YWz6ZSu5a2X6K6w5b2VCiAgICAgICAgdXBkYXRlVGltZXI6IG51bGwsCiAgICAgICAgc3FsU3VnZ2VzdExpc3Q6IFtdLAogICAgICAgIC8vIOiBlOaDs+WKn+iDvQogICAgICAgIC8vIGhpbnQ6IO+8iGNtKSA9PiB7CiAgICAgICAgLy8gICByZXR1cm4gdGhpcy5IaW50KCk7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGhpbnQuanMgb3B0aW9ucwogICAgICAgIGhpbnRPcHRpb25zOiB7CiAgICAgICAgICAvLyDlvZPljLnphY3lj6rmnInkuIDpobnnmoTml7blgJnmmK/lkKboh6rliqjooaXlhagKICAgICAgICAgIGNvbXBsZXRlU2luZ2xlOiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgLy8g6IGU5oOz6KGo5ZCNCiAgICAgICAgc3FsU3VnZ2VzdFRhYmxlTmFtZUxpc3RzOiBbXSwKICAgICAgICAvLyDogZTmg7PooagKICAgICAgICBzcWxTdWdnZXN0VGFibGVMaXN0czogW10sCiAgICAgICAgLy8g6IGU5oOz5YiX5ZCNCiAgICAgICAgc3FsU3VnZ2VzdENvbHVtbnM6IFtdLAogICAgICAgIHJ1bkN1cjogbnVsbCAvLyDpgInkuK3mlofmnKzoh6rliqjpq5jkuq7vvIzlj4rpq5jkuq7mlrnlvI8KICAgICAgICAvLyBzdHlsZVNlbGVjdGVkVGV4dDogdHJ1ZSwKICAgICAgICAvLyBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzOiB7IHNob3dUb2tlbjogL1x3LywgYW5ub3RhdGVTY3JvbGxiYXI6IHRydWUgfSwKICAgICAgICAvLyBtb3JlIGNvZGVtaXJyb3Igb3B0aW9ucy4uLgogICAgICAgIC8vIOWmguaenOaciWhpbnTmlrnpnaLnmoTphY3nva7vvIzkuZ/lupTor6Xlh7rnjrDlnKjov5nph4wKCiAgICAgIH0KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGNvZGVtaXJyb3IoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzLmNvZGVFZGl0b3IuY29kZW1pcnJvcjsKICAgIH0KCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLiRyZWZzLmNvZGVFZGl0b3IpIHsKICAgICAgLy8g57uR5a6a6ZSu55uY5LqL5Lu2CiAgICAgIHRoaXMuJHJlZnMuY29kZUVkaXRvci5jb2RlbWlycm9yLm9uKCJrZXl1cCIsIHRoaXMuaGFuZGxlRWRpdG9yS2V5VXApOwogICAgfQogIH0sCgogIGRlc3Ryb3llZCgpIHt9LAoKICBtZXRob2RzOiB7CiAgICAvLyDogZTmg7PooajlkI0KICAgIGF1dG9jb21wbGV0ZVRhYmxlcyhlZGl0b3IpIHsKICAgICAgbGV0IGN1ciA9IGVkaXRvci5nZXRDdXJzb3IoKTsKICAgICAgbGV0IHRva2VuID0gdGhpcy5nZXRUb2tlbihlZGl0b3IsIGN1cik7CiAgICAgIGxldCB3b3JkID0gdG9rZW4uc3RyaW5nLnRvTG93ZXJDYXNlKCk7CiAgICAgIGxldCBsaXN0ID0gW107CiAgICAgIGxpc3QgPSB0aGlzLmdldFN1Z2dlc3RMaXN0QnlSZXF1c2VzdCh0aGlzLnNxbFN1Z2dlc3RUYWJsZU5hbWVMaXN0cywgd29yZCk7CiAgICAgIHRoaXMuaGludFNvcnQobGlzdCwgd29yZCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGlzdDogbGlzdCwKICAgICAgICBmcm9tOiBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgdG9rZW4uc3RhcnQpLAogICAgICAgIHRvOiBDb2RlTWlycm9yLlBvcyhjdXIubGluZSwgdG9rZW4uZW5kKQogICAgICB9OwogICAgfSwKCiAgICAvLyDogZTmg7PooajlkI185YiX5ZCN5aSE55CGCiAgICBnZXRTdWdnZXN0TGlzdEJ5UmVxdXNlc3QobGlzdCwgd29yZCkgewogICAgICBsZXQgbGlzdEFyciA9IFtdOwogICAgICBsZXQgbWFwID0ge307CgogICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIGxldCBpdGVtID0gbGlzdFtpXS50b0xvd2VyQ2FzZSgpOwoKICAgICAgICBpZiAoaXRlbS5pbmRleE9mKHdvcmQudHJpbSgpKSAhPT0gLTEpIHsKICAgICAgICAgIC8vIGlmICh3b3JkID09PSBpdGVtKSB7CiAgICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgICAvLyB9CiAgICAgICAgICBpZiAoIW1hcFtsaXN0W2ldXSkgewogICAgICAgICAgICBsaXN0QXJyLnB1c2gobGlzdFtpXSk7CiAgICAgICAgICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbGlzdEFycjsKICAgIH0sCgogICAgYXV0b2NvbXBsZXRlQ29sdW1ucyhlZGl0b3IpIHsKICAgICAgbGV0IGxpc3QgPSBbXTsKICAgICAgbGV0IGN1ciA9IGVkaXRvci5nZXRDdXJzb3IoKTsKICAgICAgbGV0IHRva2VuID0gdGhpcy5nZXRUb2tlbihlZGl0b3IsIGN1cik7CiAgICAgIGxldCB3b3JkID0gdG9rZW4uc3RyaW5nLnRvTG93ZXJDYXNlKCk7IC8v6IGU5oOz5YiX5ZCNCgogICAgICBsZXQgc3FsU3VnZ2VzdENvbHVtbnMgPSB0aGlzLmdldFN1Z2dlc3RMaXN0QnlSZXF1c2VzdCh0aGlzLnNxbFN1Z2dlc3RDb2x1bW5zLCB3b3JkKTsKICAgICAgbGlzdCA9IGxpc3QuY29uY2F0KHNxbFN1Z2dlc3RDb2x1bW5zKTsKICAgICAgdGhpcy5oaW50U29ydChsaXN0LCB3b3JkKTsKICAgICAgbGlzdCA9IFsuLi5uZXcgU2V0KGxpc3QpXTsKICAgICAgcmV0dXJuIHsKICAgICAgICBsaXN0OiBsaXN0LAogICAgICAgIGZyb206IENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCB0b2tlbi5zdGFydCksCiAgICAgICAgdG86IENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCB0b2tlbi5lbmQpCiAgICAgIH07CiAgICB9LAoKICAgIC8vIOacrOWcsOWFs+mUruWtl+iBlOaDswogICAgYXV0b0NvbXBsZXRlKGVkaXRvcikgewogICAgICBsZXQgQ09NQklORURfS0VZV09SRFMgPSBLRVlXT1JEUy5jb25jYXQoRlVOQ1RJT05TKTsKICAgICAgbGV0IGN1ciA9IGVkaXRvci5nZXRDdXJzb3IoKTsKICAgICAgbGV0IHRva2VuID0gdGhpcy5nZXRUb2tlbihlZGl0b3IsIGN1cik7CiAgICAgIGxldCB3b3JkID0gdG9rZW4uc3RyaW5nLnRvTG93ZXJDYXNlKCk7CiAgICAgIGxldCBsaXN0ID0gW107IC8vIGxldCBzcWwgPSBlZGl0b3IuZ2V0VmFsdWUoKTsKICAgICAgLy/lhbPplK7lrZcs5Ye95pWwCgogICAgICBpZiAod29yZC5pbmRleE9mKCIuIikgPCAwKSB7CiAgICAgICAgbGV0IGEgPSB0aGlzLmdldFN1Z2dlc3RMaXN0QnlMb2NhbChDT01CSU5FRF9LRVlXT1JEUywgd29yZCk7CiAgICAgICAgbGlzdCA9IGxpc3QuY29uY2F0KGEpOwogICAgICB9IC8v5Y+Y6YePCgoKICAgICAgaWYgKHdvcmQuaW5kZXhPZigiLiIpIDwgMCkgewogICAgICAgIGlmICh0aGlzLnN5c3RlbVZhcnMgJiYgdGhpcy5zeXN0ZW1WYXJzLmxlbmd0aCkgewogICAgICAgICAgbGV0IGFyciA9IHRoaXMuZ2V0U3VnZ2VzdExpc3RCeUxvY2FsKHRoaXMuc3lzdGVtVmFycywgd29yZCk7CiAgICAgICAgICBsaXN0ID0gbGlzdC5jb25jYXQoYXJyKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuaGludFNvcnQobGlzdCwgd29yZCk7IC8vIGlmIChsaXN0Lmxlbmd0aCA8IDEwKSB7IC8vIOWKoOWFpeW3sue7j+i+k+WFpeeahOWNleivjeiBlOaDs+WFs+mUruWtlwogICAgICAvLyAgICAgbGV0IHdvcmRzID0gc3FsLnNwbGl0KC9bXlx3X1x1NGUwMC1cdTlmYTVdLyk7CiAgICAgIC8vICAgICBsZXQgbndvcmRzID0gW107CiAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIC8vICAgICAgICAgaWYgKCghd29yZHNbaV0pIHx8ICh3b3JkID09PSB3b3Jkc1tpXSkpIHsKICAgICAgLy8gICAgICAgICAgICAgY29udGludWU7CiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIG53b3Jkcy5wdXNoKHdvcmRzW2ldKTsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGxpc3QgPSBsaXN0LmNvbmNhdCh0aGlzLmdldFN1Z2dlc3RMaXN0QnlMb2NhbChud29yZHMsIHdvcmQpKTsKICAgICAgLy8gfQoKICAgICAgbGlzdCA9IFsuLi5uZXcgU2V0KGxpc3QpXTsKICAgICAgcmV0dXJuIHsKICAgICAgICBsaXN0OiBsaXN0LAogICAgICAgIGZyb206IENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCB0b2tlbi5zdGFydCksCiAgICAgICAgdG86IENvZGVNaXJyb3IuUG9zKGN1ci5saW5lLCB0b2tlbi5lbmQpCiAgICAgIH07CiAgICB9LAoKICAgIC8vIOmAmui/h+WFs+mUruWtlyDljLnphY3ojrflj5ZzdWdnZXN05YiX6KGoCiAgICBnZXRTdWdnZXN0TGlzdEJ5TG9jYWwobGlzdCwgd29yZCkgewogICAgICBpZiAod29yZC50cmltKCkgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICBsZXQgbWFwID0ge307CiAgICAgIGxldCBsaXN0QXJyID0gW107CgogICAgICBmb3IgKGxldCBpID0gMCwgbG9jYWxMID0gbGlzdC5sZW5ndGg7IGkgPCBsb2NhbEw7IGkrKykgewogICAgICAgIGxldCBhID0gbGlzdFtpXS50b0xvd2VyQ2FzZSgpOwoKICAgICAgICBpZiAoYS5pbmRleE9mKHdvcmQudHJpbSgpKSAhPT0gLTEpIHsKICAgICAgICAgIC8vIGlmIChpc1NlbGYgJiYgKHdvcmQgPT09IGEpKSB7CiAgICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgICAvLyB9CiAgICAgICAgICBpZiAoIW1hcFtsaXN0W2ldXSkgewogICAgICAgICAgICBsaXN0QXJyLnB1c2gobGlzdFtpXSk7CiAgICAgICAgICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbGlzdEFycjsKICAgIH0sCgogICAgaGludFNvcnQoYXJyLCBrZXkpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIuTGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA8IGFyci5MZW5ndGg7IGorKykgewogICAgICAgICAgbGV0IGEgPSBhcnJbaV0udG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGxldCBiID0gYXJyW2pdLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgaWYgKGEuaW5kZXhPZihrZXkpID4gYi5pbmRleE9mKGtleSkpIHsKICAgICAgICAgICAgbGV0IHRlbXAgPSBhcnJbaV07CiAgICAgICAgICAgIGFycltpXSA9IGFycltqXTsKICAgICAgICAgICAgYXJyW2pdID0gdGVtcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgZm9ybWF0U3FsRnVuKCkgewogICAgICB0aGlzLnNxbENvZGUgPSBzcWxGb3JtYXR0ZXIuZm9ybWF0KHRoaXMuc3FsQ29kZSwge30pOwogICAgfSwKCiAgICAvLyDplK7nm5jkuovku7bnm5HlkKwKICAgIGhhbmRsZUVkaXRvcktleVVwKGVkaXRvciwgZSkgewogICAgICB0aGlzLnRpbWVyICYmIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGNvbnN0IHZhbHVlID0gZWRpdG9yLmdldFZhbHVlKCkudHJpbSgpOyAvLyDovpPlhaXnmoTmiYDmnIlzcWwKCiAgICAgICAgbGV0IGN1ciA9IGVkaXRvci5nZXRDdXJzb3IoKTsKICAgICAgICBsZXQgdG9rZW4gPSB0aGlzLmdldFRva2VuKGVkaXRvciwgY3VyKTsKICAgICAgICBsZXQgd29yZCA9IHRva2VuLnN0cmluZy50b0xvd2VyQ2FzZSgpLnRyaW0oKTsgLy8g5YWz6ZSu5a2XCgogICAgICAgIGlmIChlLmtleSA9PT0gIkVudGVyIiB8fCBlLmtleSA9PT0gIlRhYiIgfHwgZS5rZXkgPT09ICJFc2NhcGUiIHx8IHdvcmQgPT09ICIiKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRXb3JkID0gIiI7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmN1cnJlbnRXb3JkID09PSB3b3JkICYmIChlLmtleSA9PT0gIkFycm93VXAiIHx8IGUua2V5ID09PSAiQXJyb3dEb3duIikpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jdXJyZW50V29yZCA9IHdvcmQ7IC8vIOWkjeS9jQoKICAgICAgICB0aGlzLnNxbFN1Z2dlc3RDb2x1bW5zID0gW107CiAgICAgICAgdGhpcy5ydW5DdXIgPSBjdXI7CiAgICAgICAgdGhpcy5nZXRTdWdnZXN0RGF0YShlZGl0b3IsIHZhbHVlLCB3b3JkKTsKICAgICAgfSwgMTAwKTsKICAgIH0sCgogICAgLy8g6I635Y+W5YWJ5qCH55qE5L2N572uCiAgICBnZXRUb2tlbihlLCBjdXIpIHsKICAgICAgbGV0IHQgPSBlLmdldFRva2VuQXQoY3VyKTsKCiAgICAgIGlmICh0LnN0cmluZyAmJiAodC5zdHJpbmcuaW5kZXhPZigiLiIpID49IDAgfHwgdC5zdHJpbmcuaW5kZXhPZigiJCIpID49IDApKSB7CiAgICAgICAgaWYgKGN1ci5jaCA+IDApIHsKICAgICAgICAgIGxldCBiZWZvcmUgPSBlLmdldFRva2VuQXQoewogICAgICAgICAgICBsaW5lOiBjdXIubGluZSwKICAgICAgICAgICAgY2g6IHQuc3RhcnQKICAgICAgICAgIH0pOwogICAgICAgICAgdC5zdHJpbmcgPSAoYmVmb3JlLnN0cmluZyArIHQuc3RyaW5nKS50cmltKCk7CiAgICAgICAgICB0LnN0YXJ0ID0gYmVmb3JlLnN0YXJ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHQ7CiAgICB9LAoKICAgIC8vIGV4ZWNTcWwoKSB7CiAgICAvLyAgIGxldCBzcWwgPQogICAgLy8gICAgICh0aGlzLmNvZGVtaXJyb3IgJiYgdGhpcy5jb2RlbWlycm9yLmdldFNlbGVjdGlvbigpKSB8fCB0aGlzLnNxbENvZGU7CiAgICAvLyAgIGxldCBwb3N0RGF0YSA9IHsgZGI6IHRoaXMuZGIsIG5hbWU6IHRoaXMuc3FsTmFtZSwgc3FsIH07CiAgICAvLyAgIGNvbnNvbGUubG9nKGV4ZWNTcWwpOwogICAgLy8gICBleGVjU3FsKHBvc3REYXRhKS50aGVuKGRhdGEgPT4gewogICAgLy8gICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgLy8gICB9KTsKICAgIC8vICAgY29uc29sZS5sb2coc3FsKTsKICAgIC8vIH0sCiAgICBnZXRTdWdnZXN0RGF0YShlZGl0b3IsIHZhbHVlLCB3b3JkKSB7CiAgICAgIGxldCBjdXIgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7IC8vIOiusOW9leW9k+WJjeafpeivouWFs+mUruivjQoKICAgICAgaWYgKHdvcmQudHJpbSgpID09PSAiIikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgbGV0IHRhYmxlc0FsaWFzID0gdGhpcy5nZXRUYWJsZXNBbmRBbGlhcyh2YWx1ZSk7CiAgICAgIGxldCBsZWZ0VmFsdWUgPSBlZGl0b3IuZ2V0UmFuZ2UoewogICAgICAgIGxpbmU6IDAsCiAgICAgICAgY2g6IDAKICAgICAgfSwgY3VyKTsgLy8gaWYgKFRBQkxFX1NVR0dFU0VUX1BPU19SRUcudGVzdChsZWZ0VmFsdWUpICYmIHRoaXMuZHNOYW1lKSB7CiAgICAgIC8vICAgLy8gZnJvbSBqb2luIOWQjuivt+axguihqOWQjQogICAgICAvLyAgIHRoaXMuZ2V0SGludFRhYmxlcyh7IGRzTmFtZTogdGhpcy5kc05hbWUsIHE6IHdvcmQgfSk7CiAgICAgIC8vIH0gZWxzZSBpZiAodGFibGVzQWxpYXMubGVuZ3RoICYmIHRoaXMuZHNOYW1lKSB7CiAgICAgIC8vICAgLy8g5piv5ZCm5pyJ6KGoIOihqOaYr+WQpuacieWIq+WQjQogICAgICAvLyAgIHRoaXMuZ2V0SGludENvbHVtbnModGFibGVzQWxpYXMsIHdvcmQpOwogICAgICAvLyB9IGVsc2UgewogICAgICAvLyAgIHRoaXMuc2hvd1N1Z2dlc3RNZW51KCJsb2NhbCIpOyAvLyDmnKzlnLDogZTmg7MKICAgICAgLy8gfQoKICAgICAgaWYgKFRBQkxFX1NVR0dFU0VUX1BPU19SRUcudGVzdChsZWZ0VmFsdWUpKSB7CiAgICAgICAgLy8gZnJvbSBqb2luIOWQjuivt+axguihqOWQjQogICAgICAgIHRoaXMuZ2V0SGludFRhYmxlcygpOwogICAgICB9IGVsc2UgaWYgKHRhYmxlc0FsaWFzLmxlbmd0aCkgewogICAgICAgIC8vIOaYr+WQpuacieihqCDooajmmK/lkKbmnInliKvlkI0KICAgICAgICB0aGlzLmdldEhpbnRDb2x1bW5zKHRhYmxlc0FsaWFzLCB3b3JkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3dTdWdnZXN0TWVudSgnbG9jYWwnKTsgLy8g5pys5Zyw6IGU5oOzCiAgICAgIH0KICAgIH0sCgogICAgZ2V0SGludFRhYmxlcygpIHsKICAgICAgdGhpcy5zcWxTdWdnZXN0VGFibGVOYW1lTGlzdHMgPSBbJ2FhYScsICdiYmInLCAnY2NjJywgJ2RlZicsICd0YWJsZTEnLCAndGFibGUyJywgJ3RhYmxlMycsICd0YWJsZTQnLCAnZ2h5J107CiAgICAgIHRoaXMuc2hvd1N1Z2dlc3RNZW51KCJ0YWJsZSIpOwogICAgfSwKCiAgICBnZXRIaW50Q29sdW1ucyh0YWJsZXNBbGlhcywgd29yZCkgewogICAgICBsZXQgdGFibGVzID0gW107CiAgICAgIGxldCB0YWJsZTsKICAgICAgbGV0IGJvZHkgPSB7fTsKICAgICAgbGV0IGxlZnRXb3JkOwogICAgICBsZXQgaWR4ID0gd29yZC5pbmRleE9mKCIuIik7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIGxlZnRXb3JkID0gd29yZC5zdWJzdHIoMCwgaWR4KTsKICAgICAgICB0YWJsZXNBbGlhcy5mb3JFYWNoKChpdGVtLCBpKSA9PiB7CiAgICAgICAgICBpZiAoaXRlbS5hbGlhcyA9PT0gbGVmdFdvcmQpIHsKICAgICAgICAgICAgdGFibGUgPSBpdGVtLm5hbWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmICh0YWJsZSkgewogICAgICAgICAgYm9keS50YWJsZXMgPSBbdGFibGVdOwogICAgICAgICAgdGhpcy5nZXRDb2x1bW5MaXN0KCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRhYmxlc0FsaWFzLmZvckVhY2goKGl0ZW0sIGkpID0+IHsKICAgICAgICAgIGlmIChpdGVtLm5hbWUgIT09ICIiKSB7CiAgICAgICAgICAgIHRhYmxlcy5wdXNoKGl0ZW0ubmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGFibGVzID0gWy4uLm5ldyBTZXQodGFibGVzKV07CiAgICAgICAgYm9keS50YWJsZXMgPSB0YWJsZXM7CgogICAgICAgIGlmICh0YWJsZXMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmdldENvbHVtbkxpc3QoewogICAgICAgICAgICBib2R5CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgZ2V0Q29sdW1uTGlzdCgpIHsKICAgICAgdGhpcy5zcWxTdWdnZXN0Q29sdW1ucyA9IFsndXNlcicsICdhZ2UnLCAnbmFtZScsICdpZCcsICdhYmMnLCAnZWZnJywgJ2hpaicsICdrbG0nLCAnbnV2JywgJ3doJ107CiAgICAgIHRoaXMuc2hvd1N1Z2dlc3RNZW51KCJjb2x1bW4iKTsKICAgIH0sCgogICAgLy8g5Yir5ZCN5piv5ZCm5ZCI5rOVCiAgICBpc0xlZ2FsQWxpYXMoYWxpYXMpIHsKICAgICAgbGV0IGtleXdvcmRzID0gewogICAgICAgIHdoZXJlOiAxLAogICAgICAgIG9uOiAxLAogICAgICAgIHVzaW5nOiAxLAogICAgICAgIGpvaW46IDEsCiAgICAgICAgZ3JvdXA6IDEsCiAgICAgICAgb3JkZXI6IDEsCiAgICAgICAgbGltaXQ6IDEKICAgICAgfTsKICAgICAgcmV0dXJuICFrZXl3b3Jkc1thbGlhcy50b0xvd2VyQ2FzZSgpXTsKICAgIH0sCgogICAgLy8g5ou/5Yiwc3FsIOi+k+WFpeeahOaJgOacieihqOWSjOWvueW6lOeahOWIq+WQjQogICAgZ2V0VGFibGVzQW5kQWxpYXMoc3FsKSB7CiAgICAgIGxldCBDT01CSU5FRF9LRVlXT1JEUyA9IEtFWVdPUkRTLmNvbmNhdChGVU5DVElPTlMpOwogICAgICBsZXQgbmFtZXMgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgVEFCTEVTX1BBVFRFTlMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgcmVnID0gVEFCTEVTX1BBVFRFTlNbaV07CgogICAgICAgIGZvciAoOzspIHsKICAgICAgICAgIGxldCBmb3VuZCA9IHJlZy5leGVjKHNxbCk7CgogICAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICByZWcubGFzdEluZGV4ID0gZm91bmQuaW5kZXggKyAxOwogICAgICAgICAgbGV0IHQgPSBmb3VuZFsxXTsKICAgICAgICAgIGxldCBhbGlhcyA9ICIiOwoKICAgICAgICAgIGlmIChmb3VuZFsyXSkgewogICAgICAgICAgICBhbGlhcyA9IGZvdW5kWzJdLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICBpZiAoIXRoaXMuaXNMZWdhbEFsaWFzKGFsaWFzKSkgewogICAgICAgICAgICAgIGFsaWFzID0gIiI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoQ09NQklORURfS0VZV09SRFMuaW5kZXhPZih0LnRvVXBwZXJDYXNlKCkpICE9PSAtMSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBuYW1lcy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogdCwKICAgICAgICAgICAgYWxpYXM6IGFsaWFzCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuYW1lczsKICAgIH0sCgogICAgc2hvd1N1Z2dlc3RNZW51KHR5cGUpIHsKICAgICAgbGV0IGF1dG9GbjsKCiAgICAgIGlmICh0aGlzLnJ1bkN1cikgewogICAgICAgIGxldCBjdXIgPSB0aGlzLmNvZGVtaXJyb3IuZ2V0Q3Vyc29yKCk7CgogICAgICAgIGlmICghXy5pc0VxdWFsKHRoaXMucnVuQ3VyLCBjdXIpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodHlwZSA9PSAibG9jYWwiKSB7CiAgICAgICAgYXV0b0ZuID0gdGhpcy5hdXRvQ29tcGxldGU7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAidGFibGUiKSB7CiAgICAgICAgYXV0b0ZuID0gdGhpcy5hdXRvY29tcGxldGVUYWJsZXM7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiY29sdW1uIikgewogICAgICAgIGF1dG9GbiA9IHRoaXMuYXV0b2NvbXBsZXRlQ29sdW1uczsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuJHJlZnMuY29kZUVkaXRvciAmJiB0aGlzLiRyZWZzLmNvZGVFZGl0b3IuY29kZW1pcnJvcikgewogICAgICAgIENvZGVNaXJyb3Iuc2hvd0hpbnQodGhpcy4kcmVmcy5jb2RlRWRpdG9yLmNvZGVtaXJyb3IsIGF1dG9Gbik7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["sqlEditor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"sql-editor-wrapper\">\n    <codemirror v-model=\"sqlCode\" :options=\"editorOptions\" ref=\"codeEditor\"></codemirror>\n  </div>\n</template>\n\n<script>\nimport { codemirror, CodeMirror } from \"vue-codemirror\";\nimport sqlFormatter from \"sql-formatter\";\n_ = require('lodash')\nimport \"codemirror/lib/codemirror.css\";\n// 语言语法\nimport \"codemirror/mode/sql/sql\";\n// sql语言提示\nimport \"codemirror/addon/hint/sql-hint.js\";\n\n// active-line.js\nimport \"codemirror/addon/selection/active-line.js\";\n\n// styleSelectedText\nimport \"codemirror/addon/selection/mark-selection.js\";\nimport \"codemirror/addon/search/searchcursor.js\";\n\n// 自动提示\nimport \"codemirror/addon/hint/show-hint.js\";\nimport \"codemirror/addon/hint/show-hint.css\";\n\n// highlightSelectionMatches\nimport \"codemirror/addon/scroll/annotatescrollbar.js\";\nimport \"codemirror/addon/search/matchesonscrollbar.js\";\nimport \"codemirror/addon/search/searchcursor.js\";\nimport \"codemirror/addon/search/match-highlighter.js\";\n// keyMap\nimport \"codemirror/mode/clike/clike.js\";\nimport \"codemirror/keymap/sublime.js\";\n\n// foldGutter\nimport \"codemirror/addon/fold/foldgutter.css\";\nimport \"codemirror/addon/fold/brace-fold.js\";\nimport \"codemirror/addon/fold/comment-fold.js\";\nimport \"codemirror/addon/fold/foldcode.js\";\nimport \"codemirror/addon/fold/foldgutter.js\";\nimport \"codemirror/addon/fold/indent-fold.js\";\nimport \"codemirror/addon/fold/markdown-fold.js\";\nimport \"codemirror/addon/fold/xml-fold.js\";\n\n// theme css\nimport \"codemirror/theme/xq-dark.css\";\nimport \"codemirror/theme/xq-light.css\";\n\nimport { KEYWORDS, FUNCTIONS } from \"./editor-box\";\n\n\n// 匹配 （from || join）关键字\nconst TABLE_SUGGESET_POS_REG = /(^|\\s+)(from|join)\\s+(\\S*)$/i;\n\n// 匹配表名 别名\nconst TABLES_PATTENS = [\n  /\\sjoin\\s+([\\w._`]+)\\s*(?:as)?\\s*([\\w_`]+)?/gi,\n  /\\sfrom\\s+([\\w._`]+)\\s*(?:as)?\\s*([\\w_`]+)?/gi\n];\n\nexport default {\n  name: \"sqlEditor\",\n  components: {\n    codemirror\n  },\n  props: {},\n  data() {\n    return {\n      sqlCode: 'select\\n' +\n              '  distinct userid\\n' +\n              'from\\n' +\n              '  tutor.s_tutor_order_tp\\n' +\n              'where\\n' +\n              '  datediff(\\'2016-08-08\\', paiddt) >= 1\\n' +\n              '  and datediff(\\'2016-08-08\\', paiddt) <= ？ ？ --过去？天',\n      editorOptions: {\n        // codemirror options\n        tabSize: 4,\n        mode: \"text/x-mysql\",\n        theme: \"xq-light\",\n        fullScreen: false,\n        lineNumbers: true,\n        line: true,\n        // 代码折叠\n        foldGutter: true,\n        gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],\n        // 高级配置（需要引入对应的插件包）,codemirror advanced options(You need to manually introduce the corresponding codemirror function script code)\n        // sublime、emacs、vim三种键位模式，支持你的不同操作习惯\n        keyMap: \"sublime\",\n        // 按键映射，比如Ctrl键映射autocomplete，autocomplete是hint代码提示事件\n        extraKeys: {\n          F9: () => {\n            this.formatSqlFun();\n          },\n          \"Ctrl-space\": \"autocomplete\"\n        },\n        showHitObj: null, // 延迟显示联想列表\n        currentWord: \"\", // 关键字记录\n        updateTimer: null,\n        sqlSuggestList: [],\n        // 联想功能\n        // hint: （cm) => {\n        //   return this.Hint();\n        // }\n        // hint.js options\n        hintOptions: {\n          // 当匹配只有一项的时候是否自动补全\n          completeSingle: false\n        },\n        // 联想表名\n        sqlSuggestTableNameLists: [],\n        // 联想表\n        sqlSuggestTableLists: [],\n        // 联想列名\n        sqlSuggestColumns: [],\n        runCur: null\n        // 选中文本自动高亮，及高亮方式\n        // styleSelectedText: true,\n        // highlightSelectionMatches: { showToken: /\\w/, annotateScrollbar: true },\n        // more codemirror options...\n        // 如果有hint方面的配置，也应该出现在这里\n      }\n    };\n  },\n  computed: {\n    codemirror() {\n      return this.$refs.codeEditor.codemirror;\n    }\n  },\n  mounted() {\n    if (this.$refs.codeEditor) {\n      // 绑定键盘事件\n      this.$refs.codeEditor.codemirror.on(\"keyup\", this.handleEditorKeyUp);\n    }\n  },\n  destroyed() {},\n  methods: {\n    // 联想表名\n    autocompleteTables(editor) {\n      let cur = editor.getCursor();\n      let token = this.getToken(editor, cur);\n      let word = token.string.toLowerCase();\n      let list = [];\n\n      list = this.getSuggestListByRequsest(this.sqlSuggestTableNameLists, word);\n      this.hintSort(list, word);\n      return {\n        list: list,\n        from: CodeMirror.Pos(cur.line, token.start),\n        to: CodeMirror.Pos(cur.line, token.end)\n      };\n    },\n    // 联想表名|列名处理\n    getSuggestListByRequsest(list, word) {\n      let listArr = [];\n      let map = {};\n      for (let i = 0, len = list.length; i < len; i++) {\n        let item = list[i].toLowerCase();\n        if (item.indexOf(word.trim()) !== -1) {\n          // if (word === item) {\n          //     continue;\n          // }\n          if (!map[list[i]]) {\n            listArr.push(list[i]);\n            map[list[i]] = true;\n          }\n        }\n      }\n      return listArr;\n    },\n    autocompleteColumns(editor) {\n      let list = [];\n      let cur = editor.getCursor();\n      let token = this.getToken(editor, cur);\n      let word = token.string.toLowerCase();\n      //联想列名\n      let sqlSuggestColumns = this.getSuggestListByRequsest(\n        this.sqlSuggestColumns,\n        word\n      );\n      list = list.concat(sqlSuggestColumns);\n      this.hintSort(list, word);\n      list = [...new Set(list)];\n\n      return {\n        list: list,\n        from: CodeMirror.Pos(cur.line, token.start),\n        to: CodeMirror.Pos(cur.line, token.end)\n      };\n    },\n    // 本地关键字联想\n    autoComplete(editor) {\n      let COMBINED_KEYWORDS = KEYWORDS.concat(FUNCTIONS);\n      let cur = editor.getCursor();\n      let token = this.getToken(editor, cur);\n      let word = token.string.toLowerCase();\n      let list = [];\n      // let sql = editor.getValue();\n\n      //关键字,函数\n      if (word.indexOf(\".\") < 0) {\n        let a = this.getSuggestListByLocal(COMBINED_KEYWORDS, word);\n        list = list.concat(a);\n      }\n      //变量\n      if (word.indexOf(\".\") < 0) {\n        if (this.systemVars && this.systemVars.length) {\n          let arr = this.getSuggestListByLocal(this.systemVars, word);\n          list = list.concat(arr);\n        }\n      }\n      this.hintSort(list, word);\n      // if (list.length < 10) { // 加入已经输入的单词联想关键字\n      //     let words = sql.split(/[^\\w_\\u4e00-\\u9fa5]/);\n      //     let nwords = [];\n      //     for (let i = 0; i < words.length; i++) {\n      //         if ((!words[i]) || (word === words[i])) {\n      //             continue;\n      //         }\n      //         nwords.push(words[i]);\n      //     }\n      //     list = list.concat(this.getSuggestListByLocal(nwords, word));\n      // }\n      list = [...new Set(list)];\n\n      return {\n        list: list,\n        from: CodeMirror.Pos(cur.line, token.start),\n        to: CodeMirror.Pos(cur.line, token.end)\n      };\n    },\n    // 通过关键字 匹配获取suggest列表\n    getSuggestListByLocal(list, word) {\n      if (word.trim() === \"\") {\n        return [];\n      }\n\n      let map = {};\n      let listArr = [];\n      for (let i = 0, localL = list.length; i < localL; i++) {\n        let a = list[i].toLowerCase();\n        if (a.indexOf(word.trim()) !== -1) {\n          // if (isSelf && (word === a)) {\n          //     continue;\n          // }\n          if (!map[list[i]]) {\n            listArr.push(list[i]);\n            map[list[i]] = true;\n          }\n        }\n      }\n\n      return listArr;\n    },\n    hintSort(arr, key) {\n      for (let i = 0; i < arr.Length; i++) {\n        for (let j = i; j < arr.Length; j++) {\n          let a = arr[i].toLowerCase();\n          let b = arr[j].toLowerCase();\n          if (a.indexOf(key) > b.indexOf(key)) {\n            let temp = arr[i];\n            arr[i] = arr[j];\n            arr[j] = temp;\n          }\n        }\n      }\n    },\n    formatSqlFun() {\n      this.sqlCode = sqlFormatter.format(this.sqlCode, {});\n    },\n    // 键盘事件监听\n    handleEditorKeyUp(editor, e) {\n      this.timer && clearTimeout(this.timer);\n      this.timer = setTimeout(() => {\n        const value = editor.getValue().trim(); // 输入的所有sql\n        let cur = editor.getCursor();\n        let token = this.getToken(editor, cur);\n        let word = token.string.toLowerCase().trim(); // 关键字\n\n        if (\n          e.key === \"Enter\" ||\n          e.key === \"Tab\" ||\n          e.key === \"Escape\" ||\n          word === \"\"\n        ) {\n          this.currentWord = \"\";\n          return true;\n        }\n        if (\n          this.currentWord === word &&\n          (e.key === \"ArrowUp\" || e.key === \"ArrowDown\")\n        ) {\n          return true;\n        }\n        this.currentWord = word;\n        // 复位\n        this.sqlSuggestColumns = [];\n        this.runCur = cur;\n        this.getSuggestData(editor, value, word);\n      }, 100);\n    },\n    // 获取光标的位置\n    getToken(e, cur) {\n      let t = e.getTokenAt(cur);\n\n      if (\n        t.string &&\n        (t.string.indexOf(\".\") >= 0 || t.string.indexOf(\"$\") >= 0)\n      ) {\n        if (cur.ch > 0) {\n          let before = e.getTokenAt({\n            line: cur.line,\n            ch: t.start\n          });\n          t.string = (before.string + t.string).trim();\n          t.start = before.start;\n        }\n      }\n      return t;\n    },\n    // execSql() {\n    //   let sql =\n    //     (this.codemirror && this.codemirror.getSelection()) || this.sqlCode;\n    //   let postData = { db: this.db, name: this.sqlName, sql };\n    //   console.log(execSql);\n    //   execSql(postData).then(data => {\n    //     console.log(data);\n    //   });\n    //   console.log(sql);\n    // },\n    getSuggestData(editor, value, word) {\n      let cur = editor.getCursor();\n      // 记录当前查询关键词\n      if (word.trim() === \"\") {\n        return;\n      }\n      let tablesAlias = this.getTablesAndAlias(value);\n      let leftValue = editor.getRange({ line: 0, ch: 0 }, cur);\n      // if (TABLE_SUGGESET_POS_REG.test(leftValue) && this.dsName) {\n      //   // from join 后请求表名\n      //   this.getHintTables({ dsName: this.dsName, q: word });\n      // } else if (tablesAlias.length && this.dsName) {\n      //   // 是否有表 表是否有别名\n      //   this.getHintColumns(tablesAlias, word);\n      // } else {\n      //   this.showSuggestMenu(\"local\"); // 本地联想\n      // }\n      if (TABLE_SUGGESET_POS_REG.test(leftValue)) {\n        // from join 后请求表名\n        this.getHintTables();\n      } else if (tablesAlias.length) {\n        // 是否有表 表是否有别名\n        this.getHintColumns(tablesAlias, word);\n      } else {\n        this.showSuggestMenu('local'); // 本地联想\n      }\n    },\n    getHintTables() {\n      this.sqlSuggestTableNameLists = ['aaa','bbb','ccc', 'def', 'table1','table2','table3','table4', 'ghy'];\n      this.showSuggestMenu(\"table\");\n    },\n    getHintColumns(tablesAlias, word) {\n      let tables = [];\n      let table;\n      let body = {};\n      let leftWord;\n      let idx = word.indexOf(\".\");\n      if (idx !== -1) {\n        leftWord = word.substr(0, idx);\n\n        tablesAlias.forEach((item, i) => {\n          if (item.alias === leftWord) {\n            table = item.name;\n          }\n        });\n\n        if (table) {\n          body.tables = [table];\n          this.getColumnList();\n        }\n      } else {\n        tablesAlias.forEach((item, i) => {\n          if (item.name !== \"\") {\n            tables.push(item.name);\n          }\n        });\n\n        tables = [...new Set(tables)];\n        body.tables = tables;\n\n        if (tables.length) {\n          this.getColumnList({ body });\n        }\n      }\n    },\n    getColumnList() {\n      this.sqlSuggestColumns = ['user', 'age', 'name', 'id', 'abc', 'efg', 'hij', 'klm', 'nuv', 'wh'];\n      this.showSuggestMenu(\"column\");\n    },\n    // 别名是否合法\n    isLegalAlias(alias) {\n      let keywords = {\n        where: 1,\n        on: 1,\n        using: 1,\n        join: 1,\n        group: 1,\n        order: 1,\n        limit: 1\n      };\n      return !keywords[alias.toLowerCase()];\n    },\n    // 拿到sql 输入的所有表和对应的别名\n    getTablesAndAlias(sql) {\n      let COMBINED_KEYWORDS = KEYWORDS.concat(FUNCTIONS);\n      let names = [];\n      for (let i = 0; i < TABLES_PATTENS.length; i++) {\n        let reg = TABLES_PATTENS[i];\n        for (;;) {\n          let found = reg.exec(sql);\n          if (!found) {\n            break;\n          }\n\n          reg.lastIndex = found.index + 1;\n          let t = found[1];\n\n          let alias = \"\";\n          if (found[2]) {\n            alias = found[2].toLowerCase();\n            if (!this.isLegalAlias(alias)) {\n              alias = \"\";\n            }\n          }\n          if (COMBINED_KEYWORDS.indexOf(t.toUpperCase()) !== -1) {\n            continue;\n          }\n\n          names.push({\n            name: t,\n            alias: alias\n          });\n        }\n      }\n      return names;\n    },\n    showSuggestMenu(type) {\n      let autoFn;\n      if (this.runCur) {\n        let cur = this.codemirror.getCursor();\n        if (!_.isEqual(this.runCur, cur)) {\n          return;\n        }\n      }\n\n      if (type == \"local\") {\n        autoFn = this.autoComplete;\n      } else if (type == \"table\") {\n        autoFn = this.autocompleteTables;\n      } else if (type == \"column\") {\n        autoFn = this.autocompleteColumns;\n      }\n      if (this.$refs.codeEditor && this.$refs.codeEditor.codemirror) {\n        CodeMirror.showHint(this.$refs.codeEditor.codemirror, autoFn);\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.sql-editor-wrapper {\n  height: 800px;\n}\n.vue-codemirror {\n  height: 100%;\n  overflow: hidden;\n  /deep/ .CodeMirror {\n    height: 100%;\n    overflow: auto;\n    .CodeMirror-lines {\n      padding-top: 6px;\n    }\n  }\n}\n</style>"],"sourceRoot":"src"}]}